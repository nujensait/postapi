( [README RUS](../README.MD) )
( [README ENG](../README.ENG.MD) )

---

# Тесты API

Этот каталог содержит автоматизированные тесты для всех API методов приложения.

## Содержание

- [Установка зависимостей для тестирования](#установка-зависимостей-для-тестирования)
- [Запуск тестов](#запуск-тестов)
  - [Запустить все тесты](#запустить-все-тесты)
  - [Запустить тесты в режиме наблюдения (watch mode)](#запустить-тесты-в-режиме-наблюдения-watch-mode)
  - [Запустить тесты с покрытием кода](#запустить-тесты-с-покрытием-кода)
- [Структура тестов](#структура-тестов)
  - [Auth API Tests](#auth-api-tests)
  - [Posts API Tests](#posts-api-tests)
  - [Integration Tests](#integration-tests)
- [Покрываемые сценарии](#покрываемые-сценарии)
- [Примечания](#примечания)

---

## Установка зависимостей для тестирования

```bash
npm install --save-dev jest supertest
```

## Запуск тестов

### Запустить все тесты
```bash
npm test
```

### Запустить тесты в режиме наблюдения (watch mode)
```bash
npm run test:watch
```

### Запустить тесты с покрытием кода
```bash
npm test -- --coverage
```

## Структура тестов

### Auth API Tests
- `POST /auth/register` - регистрация нового пользователя
- `POST /auth/login` - аутентификация пользователя

### Posts API Tests
- `POST /posts` - создание нового поста
- `GET /posts` - получение всех постов
- `PUT /posts/:id` - обновление поста
- `DELETE /posts/:id` - удаление поста

### Integration Tests
- Полный цикл работы с постами (создание → получение → обновление → удаление)

## Покрываемые сценарии

Тесты проверяют:
- ✅ Успешные операции
- ✅ Обработку ошибок (неверные данные, несуществующие ресурсы)
- ✅ Валидацию входных данных
- ✅ Корректность структуры ответов
- ✅ HTTP статус-коды
- ✅ Интеграционные сценарии

## Примечания

- Тесты используют реальную базу данных SQLite
- Перед запуском тестов убедитесь, что база данных инициализирована
- Тесты создают тестовые данные с уникальными именами для избежания конфликтов
